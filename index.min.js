/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2025 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t="undefined"!=typeof globalThis?globalThis:t||self).TagPicker=t.TagPicker||{},t.TagPicker.Sort=e())}(this,(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e(e,n,r){if(n&&!Array.isArray(n)&&"number"==typeof n.length){var o=n.length;return t(n,r<o?r:o)}return e(n,r)}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,f=[],c=!0,a=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(f.push(r.value),f.length!==e);c=!0);}catch(t){a=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(a)throw o}}return f}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}var o=function(t){return"function"==typeof t},i=function(t,e){return void 0===e&&(e=!0),!(!t||"object"!=typeof t)&&(!e||function(t,e){return!(!t||"object"!=typeof t)&&u(e)&&u(t.constructor)&&e===t.constructor}(t,Object))},u=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},f=function(t){if(function(t){return Array.isArray(t)}(t))return t.map((function(e){return f(t)}));if(i(t)){for(var e in t)t[e]=f(t[e]);return t}return!1===t?"false":null===t?"null":!0===t?"true":""+t},c=function(t){return t.replace(/[-_.](\w)/g,(function(t,e){return a(e)}))},a=function(t){return t.toUpperCase()},l=function(t,o){for(var i,u=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=r(t))||t&&"number"==typeof t.length){e&&(t=e);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(i=u()).done;){var f=e(n,i.value,2),c=f[0],a=f[1];if(-1!==(a=o(a,c))){if(0===a)break}else s(c,t)}return t},s=function(t,e){return e.delete(t)},d=document,v=d.body,p=function(t,e){return e?t.closest(e)||null:t.parentNode||null},y=function(t,e){return t.style[c(e)]=null,t},m=function(t,e,n){return function(t){return"number"==typeof t}(n)&&(n+="px"),t.style[c(e)]=f(n),t},b=function(t,e,n){e.removeEventListener(t,n)},h=function(t,e,n,r){void 0===r&&(r=!1),e.addEventListener(t,n,r)};var g,_,x,A,S=0,j=0;function k(t){h("mousemove",d,w),h("mouseup",d,T);var e=this;"touchstart"===t.type?(x=t.touches[0].clientX-S,A=t.touches[0].clientY-j):(x=t.clientX-S,A=t.clientY-j),function(t,e){t.removeAttribute(e)}(g=e.cloneNode(!0),"id"),g._ref=e,_=e.getBoundingClientRect(),m(e,"visibility","hidden"),function(t,e){(function(t,e){var n;for(var r in t)if(-1!==(n=e(t[r],r))){if(0===n)break}else delete t[r]})(e,(function(e,n){e||""===e||0===e?m(t,n,e):y(t,n)}))}(g,{height:_.height+"px",left:_.left+"px","pointer-events":"none",position:"absolute",top:_.top+"px",width:_.width+"px","z-index":9999}),function(t,e){t.append(e)}(v,g);for(var n,r=e;(n=p(r))&&(m(r=n,"cursor","move"),v!==r););}function w(t){if(g){if(function(t){t&&t.preventDefault()}(t),"touchmove"===t.type)S=t.touches[0].clientX-x,j=t.touches[0].clientY-A;else{S=t.clientX-x,j=t.clientY-A;var e,n=d.elementFromPoint(t.clientX,t.clientY);r="tag-picker__tag",n.classList.contains(r)||(n=(e=p(n,".tag-picker__tag"))?e:0),n&&n!==g._ref&&n.parentNode.insertBefore(g._ref,function(t,e){var n;for(n=t.previousSibling;n;n=n.previousSibling)if(n===e)return 1;return 0}(g._ref,n)?n:n.nextSibling)}var r,o,i;o=S,i=j,g.style.transform="translate3d("+o+"px, "+i+"px, 0)"}}function T(t){if(b("mousemove",d,w),b("mouseup",d,T),g){!function(t){var e=p(t);t.remove()}(g),y(g._ref,"visibility");for(var e,n=g._ref;(e=p(n))&&(y(n=e,"cursor"),v!==n););}g=S=j=0}return{attach:function(t,e){var n=this,r=n.constructor._;n._mask;var i=n._tags;l(i,(function(t){h("mousedown",t[2],k)})),!o(r.reverse)&&(r.reverse=function(){}),!o(r.sort)&&(r.sort=function(){})},detach:function(){this._tags},name:"TagPicker.Sort"}}));